(this["webpackJsonpbook-search"]=this["webpackJsonpbook-search"]||[]).push([[0],{30:function(e,o,t){},41:function(e,o,t){"use strict";t.r(o);var r=t(0),a=t.n(r),n=t(16),s=t.n(n),c=t(42),i=t(10),l=(t(30),t(4)),u=t(5),h=t(7),b=t(6),p=t(12);function d(e){return{type:"BOOKS_FETCH_DATA_FAIL",err:e}}function k(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}}function j(e){return{type:"FORM_CHANGE_BOOK_SEARCH_VALUE",bookSearchValue:e}}function m(e){return{type:"FORM_CHANGE_BOOK_CATEGORY_VALUE",bookCategoryValue:e}}function O(e){return{type:"FORM_CHANGE_BOOK_SORTING_VALUE",bookSortingValue:e}}var g=[{value:"all"},{value:"art"},{value:"biography"},{value:"computers"},{value:"history"},{value:"medical"},{value:"poetry"}],f=[{value:"relevance"},{value:"newest"}],_=t(1),v=function(e){Object(h.a)(t,e);var o=Object(b.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).handleChangeBookName=function(o){e.props.bookSearchValueChange(o.target.value)},e.handleChangeBookCategory=function(o){e.props.bookCategoryValueChange(o.target.value)},e.handleChangeBookSorting=function(o){e.props.bookSortingValueChange(o.target.value)},e}return Object(u.a)(t,[{key:"render",value:function(){return Object(_.jsxs)("form",{className:"header__form",noValidate:!0,onSubmit:this.props.onSubmit,children:[Object(_.jsx)("input",{className:"header__input",type:"text",name:"bookName",placeholder:"Enter the book title",value:this.props.bookSearchValue,onChange:this.handleChangeBookName}),Object(_.jsx)("br",{}),Object(_.jsx)("label",{className:"header__select-label",children:"Categories"}),Object(_.jsx)("select",{className:"header__select",name:"bookCategory",value:this.props.bookCategoryValue,onChange:this.handleChangeBookCategory,children:g.map((function(e){return Object(_.jsx)("option",{value:e.value,children:e.value},e.value)}))}),Object(_.jsx)("label",{className:"header__select-label",children:"Sorting by"}),Object(_.jsx)("select",{className:"header__select",name:"bookSorting",value:this.props.bookSortingValue,onChange:this.handleChangeBookSorting,children:f.map((function(e){return Object(_.jsx)("option",{value:e.value,children:e.value},e.value)}))}),Object(_.jsx)("button",{className:"btn header__input-btn",type:"submit",name:"submit",children:"\ud83d\udd0d"})]})}}]),t}(r.Component),C=Object(p.b)((function(e){return{bookSearchValue:e.form.bookSearchValue,bookCategoryValue:e.form.bookCategoryValue,bookSortingValue:e.form.bookSortingValue}}),(function(e){return{bookSearchValueChange:function(o){return e(j(o))},bookCategoryValueChange:function(o){return e(m(o))},bookSortingValueChange:function(o){return e(O(o))}}}))(v),S=function(e){Object(h.a)(t,e);var o=Object(b.a)(t);function t(){return Object(l.a)(this,t),o.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return Object(_.jsxs)("header",{className:"header root__section",children:[Object(_.jsx)("h1",{className:"header__title",children:"Search for books"}),Object(_.jsx)(C,{onSubmit:this.props.handleFormSubmit})]})}}]),t}(r.Component),x=S,y=t(2),E=function(e){Object(h.a)(t,e);var o=Object(b.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).handleClick=function(){e.props.onCardClick(e.props.book)},e}return Object(u.a)(t,[{key:"render",value:function(){return Object(_.jsxs)("div",{className:"book-card",id:this.props.book.etag,onMouseUp:this.handleClick,children:[Object(_.jsx)("img",{className:"book-card__image",alt:"book cover",src:this.props.book.volumeInfo&&this.props.book.volumeInfo.imageLinks?this.props.book.volumeInfo.imageLinks.thumbnail:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/No-Image-Placeholder.svg/495px-No-Image-Placeholder.svg.png"}),Object(_.jsxs)("div",{className:"book-card__details",children:[Object(_.jsx)("p",{className:"category book-card__category",children:this.props.book.volumeInfo.categories?this.props.book.volumeInfo.categories[0]:""}),Object(_.jsx)("h3",{className:"book-card__name",children:this.props.book.volumeInfo.title}),Object(_.jsx)("p",{className:"book-card__author",children:this.props.book.volumeInfo.authors?this.props.book.volumeInfo.authors.reduce((function(e,o){return e+", "+o})):""})]})]})}}]),t}(r.Component),I=E,N=function(e){Object(h.a)(t,e);var o=Object(b.a)(t);function t(){return Object(l.a)(this,t),o.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props.books),Object(_.jsx)("div",{className:"main__cards-container",children:Object(_.jsx)("div",{id:"booksList",className:"books-list root__section",children:this.props.books[0]&&this.props.books.map((function(o){return Object(_.jsx)(I,{book:o,onCardClick:e.props.onCardClick},o.etag)}))})})}}]),t}(r.Component),V=N,A=function(e){Object(h.a)(t,e);var o=Object(b.a)(t);function t(){return Object(l.a)(this,t),o.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h3",{className:"main__message",children:this.props.isSearched?this.props.err?this.props.err:this.props.totalItems?-1===this.props.totalItems?"":"Found ".concat(this.props.totalItems," results"):"No results found":"The books found will be displayed here"}),Object(_.jsx)(V,Object(y.a)({},this.props)),this.props.totalItems>30&&this.props.totalItems>this.props.index?Object(_.jsx)("button",{onMouseUp:this.props.onLoadMoreBtnClick,className:"btn main__btn",children:"Load more"}):""]})}}]),t}(r.Component),F=A,B=function(e){Object(h.a)(t,e);var o=Object(b.a)(t);function t(){return Object(l.a)(this,t),o.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return Object(_.jsxs)("div",{className:"book-info",children:[Object(_.jsx)("div",{className:"close",onMouseUp:this.props.onClose,children:"\u2716"}),Object(_.jsx)("div",{className:"book-info__img-container",children:Object(_.jsx)("img",{className:"book-info__img",src:this.props.book.volumeInfo&&this.props.book.volumeInfo.imageLinks?this.props.book.volumeInfo.imageLinks.thumbnail:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/No-Image-Placeholder.svg/495px-No-Image-Placeholder.svg.png",alt:"book cover"})}),Object(_.jsxs)("div",{className:"book-info__details",children:[Object(_.jsxs)("p",{className:"category book-card__category",children:[this.props.book.volumeInfo.categories?this.props.book.volumeInfo.categories.reduce((function(e,o){return e+", "+o})):"","/General"]}),Object(_.jsx)("h3",{className:"book-card__name",children:this.props.book.volumeInfo.title}),Object(_.jsx)("p",{className:"book-card__author",children:this.props.book.volumeInfo.authors?this.props.book.volumeInfo.authors.reduce((function(e,o){return e+", "+o})):""}),Object(_.jsx)("textarea",{className:"book-card__description",disabled:!0,value:this.props.book.volumeInfo.description?this.props.book.volumeInfo.description:"No description available"})]})]})}}]),t}(r.Component),T=B,L=function(e){Object(h.a)(t,e);var o=Object(b.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).fetchBooks=function(o){e.props.fetchData('https://www.googleapis.com/books/v1/volumes?q="'.concat(o.search,'"+subject="').concat(o.category,'"&orderBy=').concat(o.order,"&maxResults=30&startIndex=").concat(o.index))},e.loadMore=function(){e.props.isFetching(!0),e.fetchBooks({search:e.props.bookSearchValue,category:e.props.bookCategoryValue,order:e.props.bookSortingValue,index:e.props.incrementedIndex}),e.props.incrementIndex()},e.submitSearchForm=function(o){o.preventDefault(),e.props.reset(),e.props.history.push("/book-search/"),e.props.isSearched(!0),e.props.isFetching(!0),e.fetchBooks({search:e.clearRequest(e.props.bookSearchValue),category:e.props.bookCategoryValue,order:e.props.bookSortingValue,index:0}),e.props.incrementIndex()},e.handleCardClick=function(o){e.props.setCardData(o),e.currentBookId=o.etag,e.props.history.push("/book/:"+e.currentBookId)},e.handleClose=function(){e.props.history.push("/book-search/")},e}return Object(u.a)(t,[{key:"clearRequest",value:function(e){return e.replace(/[<>\/#$%\^\*;{}=\_`~+&]/g," ").trim()}},{key:"render",value:function(){var e=this.props.history;return Object(_.jsxs)("div",{className:"App",children:[this.props.isFetch?Object(_.jsx)("div",{className:"loader-container",children:Object(_.jsx)("div",{className:"loader",children:"Loading..."})}):"",Object(_.jsx)(x,{handleFormSubmit:this.submitSearchForm}),Object(_.jsxs)(c.d,{children:[Object(_.jsx)(c.b,{history:e,exact:!0,path:"/book-search/",children:Object(_.jsx)(F,{isSearched:this.props.isSearch,isFetching:this.props.isFetch,err:this.props.fetchErrMessage,totalItems:this.props.totalItems,books:this.props.books,index:this.props.incrementedIndex,onLoadMoreBtnClick:this.loadMore,onCardClick:this.handleCardClick})}),Object(_.jsx)(c.b,{history:e,exact:!0,path:"/book-search/book/:"+this.currentBookId,children:0!==this.props.card.card.length?Object(_.jsx)(T,{book:this.props.card.card,onClose:this.handleClose}):Object(_.jsx)(c.a,{to:"/book-search/"})}),Object(_.jsx)(c.b,{history:e,path:"*",children:Object(_.jsx)(c.a,{to:"/book-search/"})})]})]})}}]),t}(r.Component),R=Object(p.b)((function(e){return console.log(e),console.log("state"),{isSearch:e.books.isSearched,isFetch:e.books.isFetching,totalItems:e.books.totalBooks,books:e.books.books,incrementedIndex:e.books.index,reset:e.books.reset,fetchErrMessage:e.books.err.message,bookSearchValue:e.form.bookSearchValue,bookCategoryValue:e.form.bookCategoryValue,bookSortingValue:e.form.bookSortingValue,card:e.card}}),(function(e){return{isSearched:function(o){return e({type:"CHANGE_IS_SEARCHED",val:o})},fetchData:function(o){return e(function(e){return function(o){fetch(e).then((function(e){return e.ok?e:Promise.reject(e)})).then((function(e){return e.json()})).then((function(e){o(function(e){return{type:"BOOKS_FETCH_DATA_SUCCESS",books:e.items}}(e)),o(function(e){return{type:"TOTAL_BOOKS_FETCH_DATA_SUCCESS",totalBooksItems:e.totalItems}}(e)),o(d(""))})).then((function(){return o(k(!1))})).catch((function(e){console.log(e),o(d(e)),o(k(!1))}))}}(o))},isFetching:function(o){return e(k(o))},incrementIndex:function(){return e({type:"NEXT_PAGE"})},reset:function(){return e({type:"RESET"})},bookSearchValueChange:function(o){return e(j(o))},bookCategoryValueChange:function(o){return e(m(o))},bookSortingValueChange:function(o){return e(O(o))},setCardData:function(o){return e(function(e){return{type:"SELECTED_CARD",card:e}}(o))}}}))(Object(c.e)(L)),G=t(13),H=t(24),D="BOOKS_FETCH_DATA_SUCCESS",w="TOTAL_BOOKS_FETCH_DATA_SUCCESS",M="TOGGLE_IS_FETCHING",U="CHANGE_IS_SEARCHED",K="NEXT_PAGE",P="RESET",q="BOOKS_FETCH_DATA_FAIL",J={books:[],index:0,totalBooks:-1,isFetching:!1,isSearched:!1,err:""};var X="FORM_CHANGE_BOOK_SEARCH_VALUE",Y="FORM_CHANGE_BOOK_CATEGORY_VALUE",W="FORM_CHANGE_BOOK_SORTING_VALUE",$={bookSearchValue:"",bookCategoryValue:"all",bookSortingValue:"relevance"};var z="SELECTED_CARD",Q={card:[]};var Z=Object(G.combineReducers)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case w:return Object(y.a)(Object(y.a)({},e),{},{totalBooks:o.totalBooksItems});case D:return Object(y.a)(Object(y.a)({},e),{},{books:Object(H.a)(e.books.concat(o.books))});case q:return Object(y.a)(Object(y.a)({},e),{},{err:o.err});case M:return Object(y.a)(Object(y.a)({},e),{},{isFetching:o.isFetching});case U:return Object(y.a)(Object(y.a)({},e),{},{isSearched:o.val});case K:return Object(y.a)(Object(y.a)({},e),{},{index:e.index+=30});case P:return J;default:return e}},form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case X:return Object(y.a)(Object(y.a)({},e),{},{bookSearchValue:o.bookSearchValue});case Y:return Object(y.a)(Object(y.a)({},e),{},{bookCategoryValue:o.bookCategoryValue});case W:return Object(y.a)(Object(y.a)({},e),{},{bookSortingValue:o.bookSortingValue});default:return e}},card:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,o=arguments.length>1?arguments[1]:void 0;return o.type===z?Object(y.a)(Object(y.a)({},e),{},{card:o.card}):e}}),ee=Z,oe=t(22),te=t(23),re=Object(G.createStore)(ee,Object(te.composeWithDevTools)(Object(G.applyMiddleware)(oe.a))),ae=Object(i.a)();s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(p.a,{store:re,children:Object(_.jsx)(c.c,{history:ae,children:Object(_.jsx)(R,{})})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.94e407fc.chunk.js.map